#Template_DB_MySQLv8.conf created by Max Chudinov for Zabbix 4.2 "Template DB MySQLv8"
#For OS Linux: You need create .my.cnf in zabbix-agent home directory (/var/lib/zabbix by default) 
#For OS Windows: You need add PATH to mysql and mysqladmin and create my.cnf in %WINDIR%\my.cnf,C:\my.cnf,BASEDIR\my.cnf https://dev.mysql.com/doc/refman/5.7/en/option-files.html
#The file must have three strings:
#[client]
#user=
#password=
#
UserParameter=mysql.ping[*], mysqladmin -h $1 ping
UserParameter=mysql.status[*], mysql -h $1 -sNX -e 'show global status'
UserParameter=mysql.version[*], mysqladmin -s -h $1 version
UserParameter=mysql.db.discovery[*], host=$1;dir=$(mysql -h $host -sN -e "select @@datadir");/bin/echo -n '{"data":[';for db in $(HOME=/var/lib/zabbix mysql -h $host -sN -e "show databases");do /bin/echo -n "{\"{#DBNAME}\": \"$db\",\"{#DBPATH}\": \"$dir$db\"},";done | sed -e 's:,$::'; /bin/echo -n ']}'
UserParameter=mysql.replication.discovery[*], mysql -h $1 -sNX -e 'show slave status'
UserParameter=mysql.slave_status[*], mysql -h $1 -sNX -e 'show slave status'
